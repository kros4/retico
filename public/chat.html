<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

    <title>Socket.IO chat</title>
	<link rel="stylesheet" type="text/css" href="style.css">

</head>
<body onload="docReady()" onkeydown="" onkeyup="">
		<form action="">
		  <input id="m" autocomplete="off" /><button>Send</button>
		</form>

	<section id="plataforma">
	</section>
		
	<script src="/socket.io/socket.io.js"></script>
	<script src="script.js"></script>
	<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
	<script>
	  var socket = io();
	  $('form').submit(function(){
		socket.emit('chat message', $('#m').val());
		$('#m').val('');
		return false;
	  });
	  socket.on('chat message', function(msg){
		//$('#messages').append($('<li>').text(msg));
	  });
	  
	  //per capturar quina tecla es prem
	  $( "#m" ).keydown(function() {
		var event = window.event ? window.event : e;
		console.log(event.keyCode)
	  });
	  
		var aleatori = Math.floor(Math.random()*5)+1;
		var posBol={
			left:Math.floor(Math.random() *2000)+1,
			top:Math.floor(Math.random()*900) +1,
		}
		var posicio = "<div id="+idJugador+" class='player' type= 'player' name='player' style =' background-color:#f220e6;position:absolute;left:50%; top:50%'>"+idJugador+"</div>";
		socket.emit("init_pose",posicio);
	
	
		function leftArrowPressed() {
            var element = document.getElementById(idJugador);
            element.style.left = parseInt(element.style.left) - 1 + '%';
            }

            function rightArrowPressed() {
            var element = document.getElementById(idJugador);
            element.style.left = parseInt(element.style.left) + 1 + '%';

            }

            function upArrowPressed() {
            var element = document.getElementById(idJugador);
            element.style.top = parseInt(element.style.top) - 1 + '%';
            }

            function downArrowPressed() {
            var element = document.getElementById(idJugador);
            element.style.top = parseInt(element.style.top) + 1 + '%';
            }

            function moveSelection(evt) {
                switch (evt.keyCode) {
                    case 37:
                    leftArrowPressed();
                    break;
                    case 39:
                    rightArrowPressed();
                    break;
                    case 38:
                    upArrowPressed();
                    break;
                    case 40:
                    downArrowPressed();
                    break;
                    }
                };

        function docReady()
        {
          
          window.addEventListener('keydown', moveSelection);
        }
	
	
	</script>
</body>
</html>